<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Love Journal</title>
  <style>
    /* Your existing CSS code */
  </style>
</head>
<body>
  <!-- Floating Hearts -->
  <div class="background"></div>

  <header>
    <h1>Love's Timeless Pages and the Whispers Between Us ðŸ’–</h1>
    <p>Capturing our cherished moments together with LOVEðŸ’•ðŸ’•!!</p>
  </header>

  <div class="container">
    <!-- Upload Section -->
    <section>
      <h2><center>Upload your Memories Here.....</center></h2>
      <label for="image-upload">Upload an Image:</label>
      <input type="file" id="image-upload" accept="image/*">
      <p class="warning" id="image-warning"></p>

      <label for="text-input">Write the Memory.... </label>
      <textarea id="text-input" placeholder="Write something beautiful..."></textarea>
      <p class="warning" id="text-warning"></p>

      <button id="add-entry">Add to Journal</button>
    </section>

    <!-- Journal Display Section -->
    <section>
      <h2><center>Journal Display</center></h2>
      <div class="entries" id="entries"></div>
    </section>
  </div>

  <script>
    const imageInput = document.getElementById('image-upload');
    const textInput = document.getElementById('text-input');
    const addButton = document.getElementById('add-entry');
    const entriesDiv = document.getElementById('entries');
    const imageWarning = document.getElementById('image-warning');
    const textWarning = document.getElementById('text-warning');

    const MAX_IMAGE_SIZE = 3 * 1024 * 1024; // 3MB
    const MAX_WORDS = 1000;

    // Function to load entries from localStorage and display them
    const loadEntries = () => {
      const entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
      entriesDiv.innerHTML = '';
      entries.forEach((entry, index) => {
        const entryDiv = document.createElement('div');
        entryDiv.classList.add('entry');

        // Display the image if available
        if (entry.image) {
          const img = document.createElement('img');
          img.src = entry.image;
          entryDiv.appendChild(img);
        }

        // Display the text
        const text = document.createElement('p');
        text.textContent = entry.text;
        entryDiv.appendChild(text);

        // Add the delete button for each entry
        const deleteButton = document.createElement('button');
        deleteButton.textContent = 'Delete';
        deleteButton.classList.add('delete-button');
        deleteButton.onclick = () => deleteEntry(index);
        entryDiv.appendChild(deleteButton);

        entriesDiv.appendChild(entryDiv);
      });
    };

    // Function to count words in the memory text
    const countWords = (text) => {
      return text.trim().split(/\s+/).filter(word => word.length > 0).length;
    };

    // Function to save the new entry
    const saveEntry = () => {
      const file = imageInput.files[0];
      const text = textInput.value.trim();

      const wordCount = countWords(text);

      // Image size check
      if (file && file.size > MAX_IMAGE_SIZE) {
        imageWarning.textContent = 'Image size exceeds 3MB. Please upload a smaller image.';
        return;
      } else {
        imageWarning.textContent = '';
      }

      // Word count check
      if (wordCount > MAX_WORDS) {
        textWarning.textContent = `Text exceeds 1000 words (Current: ${wordCount}). Please shorten your memory.`;
        return;
      } else {
        textWarning.textContent = '';
      }

      const reader = new FileReader();
      reader.onload = () => {
        const image = file ? reader.result : null;
        const newEntry = { image, text };

        const entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
        entries.push(newEntry);

        localStorage.setItem('journalEntries', JSON.stringify(entries));
        loadEntries();

        imageInput.value = '';
        textInput.value = '';
      };

      if (file) {
        reader.readAsDataURL(file);
      } else {
        const newEntry = { image: null, text };
        const entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
        entries.push(newEntry);
        localStorage.setItem('journalEntries', JSON.stringify(entries));
        loadEntries();

        textInput.value = '';
      }
    };

    // Function to delete an entry
    const deleteEntry = (index) => {
      const entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
      entries.splice(index, 1);
      localStorage.setItem('journalEntries', JSON.stringify(entries));
      loadEntries();
    };

    // Event listener to add entry when button clicked
    addButton.addEventListener('click', saveEntry);

    // Load entries when the page is loaded
    loadEntries();

    // Floating hearts animation (no changes here)
    const background = document.querySelector('.background');
    const createHeart = () => {
      const heart = document.createElement('div');
      heart.classList.add('heart');
      heart.style.left = Math.random() * 100 + 'vw';
      heart.style.animationDuration = Math.random() * 3 + 3 + 's';
      background.appendChild(heart);

      setTimeout(() => {
        heart.remove();
      }, 5000);
    };

    // Decrease the interval to create more hearts
    setInterval(createHeart, 110);  // Reduced from 300 to 200 for more hearts
  </script>
</body>
</html>
